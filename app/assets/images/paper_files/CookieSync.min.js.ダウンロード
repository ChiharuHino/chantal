!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){!function(global){!function(){!function(root){var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);function InvalidCharacterError(message){this.message=message}(InvalidCharacterError.prototype=new Error).name="InvalidCharacterError";function error(message){throw new InvalidCharacterError(message)}var TABLE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",REGEX_SPACE_CHARACTERS=/[\t\n\f\r ]/g,base64={encode:function(input){input=String(input),/[^\0-\xFF]/.test(input)&&error("The string to be encoded contains characters outside of the Latin1 range.");for(var a,b,c,buffer,padding=input.length%3,output="",position=-1,length=input.length-padding;++position<length;)a=input.charCodeAt(position)<<16,b=input.charCodeAt(++position)<<8,c=input.charCodeAt(++position),output+=TABLE.charAt((buffer=a+b+c)>>18&63)+TABLE.charAt(buffer>>12&63)+TABLE.charAt(buffer>>6&63)+TABLE.charAt(63&buffer);return 2==padding?(a=input.charCodeAt(position)<<8,b=input.charCodeAt(++position),output+=TABLE.charAt((buffer=a+b)>>10)+TABLE.charAt(buffer>>4&63)+TABLE.charAt(buffer<<2&63)+"="):1==padding&&(buffer=input.charCodeAt(position),output+=TABLE.charAt(buffer>>2)+TABLE.charAt(buffer<<4&63)+"=="),output},decode:function(input){var length=(input=String(input).replace(REGEX_SPACE_CHARACTERS,"")).length;(length=length%4==0?(input=input.replace(/==?$/,"")).length:length)%4!=1&&!/[^+a-zA-Z0-9/]/.test(input)||error("Invalid character: the string to be decoded is not correctly encoded.");for(var bitStorage,buffer,bitCounter=0,output="",position=-1;++position<length;)buffer=TABLE.indexOf(input.charAt(position)),bitStorage=bitCounter%4?64*bitStorage+buffer:buffer,bitCounter++%4&&(output+=String.fromCharCode(255&bitStorage>>(-2*bitCounter&6)));return output},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return base64});else if(freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=base64;else for(var key in base64)base64.hasOwnProperty(key)&&(freeExports[key]=base64[key]);else root.base64=base64}(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(ConsentString,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _require=ConsentString("./encode"),encodeConsentString=_require.encodeConsentString,_getMaxVendorId=_require.getMaxVendorId,encodeVendorIdsToBits=_require.encodeVendorIdsToBits,encodePurposeIdsToBits=_require.encodePurposeIdsToBits,decodeConsentString=ConsentString("./decode").decodeConsentString,vendorVersionMap=ConsentString("./utils/definitions").vendorVersionMap,consentLanguageRegexp=/^[a-z]{2}$/,cachedString=void 0,ConsentString=function(){function ConsentString(){var baseString=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConsentString),this.maxVendorId=0,this.created=new Date,this.lastUpdated=new Date,this.version=1,this.vendorList=null,this.vendorListVersion=null,this.cmpId=null,this.cmpVersion=null,this.consentScreen=null,this.consentLanguage=null,this.allowedPurposeIds=[],this.allowedVendorIds=[],baseString&&(cachedString=baseString,Object.assign(this,decodeConsentString(baseString)))}return _createClass(ConsentString,[{key:"getConsentString",value:function(){var updateDate=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],retr=void 0;if(cachedString&&!updateDate)retr=cachedString;else{if(!this.vendorList)throw new Error("ConsentString - A vendor list is required to encode a consent string");!0===updateDate&&(this.lastUpdated=new Date),retr=encodeConsentString({version:this.getVersion(),vendorList:this.vendorList,allowedPurposeIds:this.allowedPurposeIds,allowedVendorIds:this.allowedVendorIds,created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,consentLanguage:this.consentLanguage,vendorListVersion:this.vendorListVersion}),cachedString=retr}return retr}},{key:"getLastUpdated",value:function(){return this.lastUpdated}},{key:"setLastUpdated",value:function(){var date=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;cachedString="",this.lastUpdated=date?new Date(date):new Date}},{key:"getCreated",value:function(){return this.created}},{key:"setCreated",value:function(){var date=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;cachedString="",this.created=date?new Date(date):new Date}},{key:"getMaxVendorId",value:function(){return this.maxVendorId||this.vendorList&&(this.maxVendorId=_getMaxVendorId(this.vendorList.vendors)),this.maxVendorId}},{key:"getParsedVendorConsents",value:function(){return encodeVendorIdsToBits(_getMaxVendorId(this.vendorList.vendors),this.allowedVendorIds)}},{key:"getParsedPurposeConsents",value:function(){return encodePurposeIdsToBits(this.vendorList.purposes,this.allowedPurposeIds)}},{key:"getMetadataString",value:function(){return encodeConsentString({version:this.getVersion(),created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,vendorListVersion:this.vendorListVersion})}},{key:"getVersion",value:function(){return this.version}},{key:"getVendorListVersion",value:function(){return this.vendorListVersion}},{key:"setGlobalVendorList",value:function(vendorList){if("object"!==(void 0===vendorList?"undefined":_typeof(vendorList)))throw new Error("ConsentString - You must provide an object when setting the global vendor list");if(!vendorList.vendorListVersion||!Array.isArray(vendorList.purposes)||!Array.isArray(vendorList.vendors))throw new Error("ConsentString - The provided vendor list does not respect the schema from the IAB EUâ€™s GDPR Consent and Transparency Framework");this.vendorList&&this.vendorListVersion===vendorList.vendorListVersion||(cachedString="",this.vendorList={vendorListVersion:vendorList.vendorListVersion,lastUpdated:vendorList.lastUpdated,purposes:vendorList.purposes,features:vendorList.features,vendors:vendorList.vendors.slice(0).sort(function(firstVendor,secondVendor){return firstVendor.id<secondVendor.id?-1:1})},this.vendorListVersion=vendorList.vendorListVersion)}},{key:"getGlobalVendorList",value:function(){return this.vendorList}},{key:"setCmpId",value:function(id){id!==this.cmpId&&(cachedString="",this.cmpId=id)}},{key:"getCmpId",value:function(){return this.cmpId}},{key:"setCmpVersion",value:function(version){version!==this.cmpVersion&&(cachedString="",this.cmpVersion=version)}},{key:"getCmpVersion",value:function(){return this.cmpVersion}},{key:"setConsentScreen",value:function(screenId){screenId!==this.consentScreen&&(cachedString="",this.consentScreen=screenId)}},{key:"getConsentScreen",value:function(){return this.consentScreen}},{key:"setConsentLanguage",value:function(language){if(!1===consentLanguageRegexp.test(language))throw new Error("ConsentString - The consent language must be a two-letter ISO639-1 code (en, fr, de, etc.)");language!==this.consentLanguage&&(cachedString="",this.consentLanguage=language)}},{key:"getConsentLanguage",value:function(){return this.consentLanguage}},{key:"setPurposesAllowed",value:function(purposeIds){cachedString="",this.allowedPurposeIds=purposeIds}},{key:"getPurposesAllowed",value:function(){return this.allowedPurposeIds}},{key:"setPurposeAllowed",value:function(purposeId,value){var purposeIndex=this.allowedPurposeIds.indexOf(purposeId);!(cachedString="")===value?-1===purposeIndex&&this.allowedPurposeIds.push(purposeId):!1===value&&-1!==purposeIndex&&this.allowedPurposeIds.splice(purposeIndex,1)}},{key:"isPurposeAllowed",value:function(purposeId){return-1!==this.allowedPurposeIds.indexOf(purposeId)}},{key:"setVendorsAllowed",value:function(vendorIds){cachedString="",this.allowedVendorIds=vendorIds}},{key:"getVendorsAllowed",value:function(){return this.allowedVendorIds}},{key:"setVendorAllowed",value:function(vendorId,value){var vendorIndex=this.allowedVendorIds.indexOf(vendorId);!(cachedString="")===value?-1===vendorIndex&&this.allowedVendorIds.push(vendorId):!1===value&&-1!==vendorIndex&&this.allowedVendorIds.splice(vendorIndex,1)}},{key:"isVendorAllowed",value:function(vendorId){return-1!==this.allowedVendorIds.indexOf(vendorId)}}],[{key:"decodeMetadataString",value:function(encodedMetadata){var decodedString=decodeConsentString(encodedMetadata),metadata={};return vendorVersionMap[decodedString.version].metadataFields.forEach(function(field){metadata[field]=decodedString[field]}),metadata}}]),ConsentString}();module.exports={ConsentString:ConsentString}},{"./decode":3,"./encode":4,"./utils/definitions":7}],3:[function(_require,module,exports){"use strict";var _require=_require("./utils/bits"),decodeBitsToIds=_require.decodeBitsToIds,decodeFromBase64=_require.decodeFromBase64;module.exports={decodeConsentString:function(consentScreen){var version=(consentLanguage=decodeFromBase64(consentScreen)).version,cmpId=consentLanguage.cmpId,vendorListVersion=consentLanguage.vendorListVersion,purposeIdBitString=consentLanguage.purposeIdBitString,maxVendorId=consentLanguage.maxVendorId,created=consentLanguage.created,lastUpdated=consentLanguage.lastUpdated,isRange=consentLanguage.isRange,defaultConsent=consentLanguage.defaultConsent,vendorIdBitString=consentLanguage.vendorIdBitString,vendorRangeList=consentLanguage.vendorRangeList,cmpVersion=consentLanguage.cmpVersion,consentScreen=consentLanguage.consentScreen,consentLanguage=consentLanguage.consentLanguage,consentStringData={version:version,cmpId:cmpId,vendorListVersion:vendorListVersion,allowedPurposeIds:decodeBitsToIds(purposeIdBitString),maxVendorId:maxVendorId,created:created,lastUpdated:lastUpdated,cmpVersion:cmpVersion,consentScreen:consentScreen,consentLanguage:consentLanguage};if(isRange){var idMap=vendorRangeList.reduce(function(acc,endVendorId){for(var isRange=endVendorId.isRange,startVendorId=endVendorId.startVendorId,endVendorId=endVendorId.endVendorId,lastVendorId=isRange?endVendorId:startVendorId,i=startVendorId;i<=lastVendorId;i+=1)acc[i]=!0;return acc},{});consentStringData.allowedVendorIds=[];for(var i=1;i<=maxVendorId;i+=1)(defaultConsent&&!idMap[i]||!defaultConsent&&idMap[i])&&-1===consentStringData.allowedVendorIds.indexOf(i)&&consentStringData.allowedVendorIds.push(i)}else consentStringData.allowedVendorIds=decodeBitsToIds(vendorIdBitString);return consentStringData}}},{"./utils/bits":6}],4:[function(_require,module,exports){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var key,source=arguments[i];for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_require=_require("./utils/bits"),encodeToBase64=_require.encodeToBase64,padRight=_require.padRight;function encodeVendorIdsToBits(maxVendorId){for(var allowedVendorIds=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],vendorString="",id=1;id<=maxVendorId;id+=1)vendorString+=-1!==allowedVendorIds.indexOf(id)?"1":"0";return padRight(vendorString,Math.max(0,maxVendorId-vendorString.length))}function encodePurposeIdsToBits(purposes){for(var allowedPurposeIds=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Set,maxPurposeId=0,i=0;i<purposes.length;i+=1)maxPurposeId=Math.max(maxPurposeId,purposes[i].id);for(var _i=0;_i<allowedPurposeIds.length;_i+=1)maxPurposeId=Math.max(maxPurposeId,allowedPurposeIds[_i]);for(var purposeString="",id=1;id<=maxPurposeId;id+=1)purposeString+=-1!==allowedPurposeIds.indexOf(id)?"1":"0";return purposeString}function convertVendorsToRanges(vendors,allowedVendorIds){for(var range=[],ranges=[],idsInList=vendors.map(function(vendor){return vendor.id}),index=0;index<vendors.length;index+=1){var startVendorId,endVendorId=vendors[index].id;-1!==allowedVendorIds.indexOf(endVendorId)&&range.push(endVendorId),-1!==allowedVendorIds.indexOf(endVendorId)&&index!==vendors.length-1&&-1!==idsInList.indexOf(endVendorId+1)||!range.length||(startVendorId=range.shift(),endVendorId=range.pop(),range=[],ranges.push({isRange:"number"==typeof endVendorId,startVendorId:startVendorId,endVendorId:endVendorId}))}return ranges}function getMaxVendorId(vendors){var maxVendorId=0;return vendors.forEach(function(vendor){vendor.id>maxVendorId&&(maxVendorId=vendor.id)}),maxVendorId}module.exports={convertVendorsToRanges:convertVendorsToRanges,encodeConsentString:function(consentData){var maxVendorId=consentData.maxVendorId,purposes=void 0===(vendors=consentData.vendorList)?{}:vendors,allowedPurposeIds=consentData.allowedPurposeIds,rangesData=consentData.allowedVendorIds,vendors=void 0===(noRangesData=purposes.vendors)?[]:noRangesData,purposes=void 0===(noRangesData=purposes.purposes)?[]:noRangesData,maxVendorId=maxVendorId||getMaxVendorId(vendors),noRangesData=encodeToBase64(_extends({},consentData,{maxVendorId:maxVendorId,purposeIdBitString:encodePurposeIdsToBits(purposes,allowedPurposeIds),isRange:!1,vendorIdBitString:encodeVendorIdsToBits(maxVendorId,rangesData)})),rangesData=convertVendorsToRanges(vendors,rangesData),rangesData=encodeToBase64(_extends({},consentData,{maxVendorId:maxVendorId,purposeIdBitString:encodePurposeIdsToBits(purposes,allowedPurposeIds),isRange:!0,defaultConsent:!1,numEntries:rangesData.length,vendorRangeList:rangesData}));return noRangesData.length<rangesData.length?noRangesData:rangesData},getMaxVendorId:getMaxVendorId,encodeVendorIdsToBits:encodeVendorIdsToBits,encodePurposeIdsToBits:encodePurposeIdsToBits}},{"./utils/bits":6}],5:[function(encodeConsentString,module,exports){"use strict";var ConsentString=encodeConsentString("./consent-string").ConsentString,decodeConsentString=encodeConsentString("./decode").decodeConsentString,encodeConsentString=encodeConsentString("./encode").encodeConsentString;module.exports={ConsentString:ConsentString,decodeConsentString:decodeConsentString,encodeConsentString:encodeConsentString}},{"./consent-string":2,"./decode":3,"./encode":4}],6:[function(_require,module,exports){"use strict";var base64=_require("base-64"),_require=_require("./definitions"),versionNumBits=_require.versionNumBits,vendorVersionMap=_require.vendorVersionMap;function repeat(count,argument_1){for(var string=1<arguments.length&&void 0!==argument_1?argument_1:"0",padString="",i=0;i<count;i+=1)padString+=string;return padString}function padLeft(string,padding){return repeat(Math.max(0,padding))+string}function padRight(string,padding){return string+repeat(Math.max(0,padding))}function encodeIntToBits(number,numBits){var bitString="";return bitString=(bitString=numBits>=(bitString="number"==typeof number&&!isNaN(number)?parseInt(number,10).toString(2):bitString).length?padLeft(bitString,numBits-bitString.length):bitString).length>numBits?bitString.substring(0,numBits):bitString}function encodeBoolToBits(value){return encodeIntToBits(!0===value?1:0,1)}function encodeDateToBits(date,numBits){return date instanceof Date?encodeIntToBits(date.getTime()/100,numBits):encodeIntToBits(date,numBits)}function encodeLetterToBits(letter,numBits){return encodeIntToBits(letter.toUpperCase().charCodeAt(0)-65,numBits)}function encodeLanguageToBits(language){var numBits=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12;return encodeLetterToBits(language.slice(0,1),numBits/2)+encodeLetterToBits(language.slice(1),numBits/2)}function decodeBitsToInt(bitString,start,length){return parseInt(bitString.substr(start,length),2)}function decodeBitsToDate(bitString,start,length){return new Date(100*decodeBitsToInt(bitString,start,length))}function decodeBitsToBool(bitString,start){return 1===parseInt(bitString.substr(start,1),2)}function decodeBitsToLetter(letterCode){letterCode=decodeBitsToInt(letterCode);return String.fromCharCode(letterCode+65).toLowerCase()}function decodeBitsToLanguage(bitString,languageBitString,length){languageBitString=bitString.substr(languageBitString,length);return decodeBitsToLetter(languageBitString.slice(0,length/2))+decodeBitsToLetter(languageBitString.slice(length/2))}function encodeField(validator){var input=validator.input,field=validator.field,inputValue=field.name,type=field.type,numBits=field.numBits,encoder=field.encoder,validator=field.validator;if("function"==typeof validator&&!validator(input))return"";if("function"==typeof encoder)return encoder(input);var bitCount="function"==typeof numBits?numBits(input):numBits,inputValue=input[inputValue],fieldValue=null==inputValue?"":inputValue;switch(type){case"int":return encodeIntToBits(fieldValue,bitCount);case"bool":return encodeBoolToBits(fieldValue);case"date":return encodeDateToBits(fieldValue,bitCount);case"bits":return padRight(fieldValue,bitCount-fieldValue.length).substring(0,bitCount);case"list":return fieldValue.reduce(function(acc,listValue){return acc+encodeFields({input:listValue,fields:field.fields})},"");case"language":return encodeLanguageToBits(fieldValue,bitCount);default:throw new Error("ConsentString - Unknown field type "+type+" for encoding")}}function encodeFields(_ref2){var input=_ref2.input;return _ref2.fields.reduce(function(acc,field){return acc+=encodeField({input:input,field:field})},"")}function decodeField(validator){var input=validator.input,output=validator.output,startPosition=validator.startPosition,field=validator.field,type=field.type,numBits=field.numBits,decoder=field.decoder,validator=field.validator,listCount=field.listCount;if("function"==typeof validator&&!validator(output))return{newPosition:startPosition};if("function"==typeof decoder)return decoder(input,output,startPosition);var bitCount="function"==typeof numBits?numBits(output):numBits;switch(type){case"int":return{fieldValue:decodeBitsToInt(input,startPosition,bitCount)};case"bool":return{fieldValue:decodeBitsToBool(input,startPosition)};case"date":return{fieldValue:decodeBitsToDate(input,startPosition,bitCount)};case"bits":return{fieldValue:input.substr(startPosition,bitCount)};case"list":return function(input,output,startPosition,field,listCount){var listEntryCount=0;"function"==typeof listCount?listEntryCount=listCount(output):"number"==typeof listCount&&(listEntryCount=listCount);for(var newPosition=startPosition,fieldValue=[],i=0;i<listEntryCount;i+=1){var decodedFields=decodeFields({input:input,fields:field.fields,startPosition:newPosition});newPosition=decodedFields.newPosition,fieldValue.push(decodedFields.decodedObject)}return{fieldValue:fieldValue,newPosition:newPosition}}(input,output,startPosition,field,listCount);case"language":return{fieldValue:decodeBitsToLanguage(input,startPosition,bitCount)};default:throw new Error("ConsentString - Unknown field type "+type+" for decoding")}}function decodeFields(_ref4$startPosition){var input=_ref4$startPosition.input,fields=_ref4$startPosition.fields,_ref4$startPosition=_ref4$startPosition.startPosition,position=void 0===_ref4$startPosition?0:_ref4$startPosition;return{decodedObject:fields.reduce(function(acc,fieldValue){var name=fieldValue.name,numBits=fieldValue.numBits,newPosition=decodeField({input:input,output:acc,startPosition:position,field:fieldValue}),fieldValue=newPosition.fieldValue,newPosition=newPosition.newPosition;return void 0!==fieldValue&&(acc[name]=fieldValue),void 0!==newPosition?position=newPosition:"number"==typeof numBits&&(position+=numBits),acc},{}),newPosition:position}}function encodeDataToBits(data,definitionMap){var version=data.version;if("number"!=typeof version)throw new Error("ConsentString - No version field to encode");if(definitionMap[version])return encodeFields({input:data,fields:definitionMap[version].fields});throw new Error("ConsentString - No definition for version "+version)}module.exports={padRight:padRight,padLeft:padLeft,encodeField:encodeField,encodeDataToBits:encodeDataToBits,encodeIntToBits:encodeIntToBits,encodeBoolToBits:encodeBoolToBits,encodeDateToBits:encodeDateToBits,encodeLanguageToBits:encodeLanguageToBits,encodeLetterToBits:encodeLetterToBits,encodeToBase64:function(binaryValue){if(binaryValue=encodeDataToBits(binaryValue,1<arguments.length&&void 0!==arguments[1]?arguments[1]:vendorVersionMap)){for(var paddedBinaryValue=padRight(binaryValue,7-(binaryValue.length+7)%8),bytes="",i=0;i<paddedBinaryValue.length;i+=8)bytes+=String.fromCharCode(parseInt(paddedBinaryValue.substr(i,8),2));return base64.encode(bytes).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}return null},decodeBitsToIds:function(bitString){return bitString.split("").reduce(function(acc,bit,index){return"1"===bit&&-1===acc.indexOf(index+1)&&acc.push(index+1),acc},[])},decodeBitsToInt:decodeBitsToInt,decodeBitsToDate:decodeBitsToDate,decodeBitsToBool:decodeBitsToBool,decodeBitsToLanguage:decodeBitsToLanguage,decodeBitsToLetter:decodeBitsToLetter,decodeFromBase64:function(consentString,definitionMap){for(var unsafe=consentString;unsafe.length%4!=0;)unsafe+="=";for(var unsafe=unsafe.replace(/-/g,"+").replace(/_/g,"/"),bytes=base64.decode(unsafe),inputBits="",i=0;i<bytes.length;i+=1){var bitString=bytes.charCodeAt(i).toString(2);inputBits+=padLeft(bitString,8-bitString.length)}return function(bitString,version){var definitionMap=1<arguments.length&&void 0!==version?version:vendorVersionMap,version=decodeBitsToInt(bitString,0,versionNumBits);if("number"!=typeof version)throw new Error("ConsentString - Unknown version number in the string to decode");if(!vendorVersionMap[version])throw new Error("ConsentString - Unsupported version "+version+" in the string to decode");return decodeFields({input:bitString,fields:definitionMap[version].fields}).decodedObject}(inputBits,definitionMap)}}},{"./definitions":7,"base-64":1}],7:[function(require,module,exports){"use strict";module.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(decodedObject){return decodedObject.maxVendorId},validator:function(decodedObject){return!decodedObject.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(decodedObject){return decodedObject.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(decodedObject){return decodedObject.isRange}},{name:"vendorRangeList",type:"list",listCount:function(decodedObject){return decodedObject.numEntries},validator:function(decodedObject){return decodedObject.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(decodedObject){return decodedObject.isRange}}]}]}}}},{}],8:[function(require,module,exports){var ConsentString=require("consent-string").ConsentString;window.DEBUG=!0,window.sasCookieSync=window.sasCookieSync||function(window,document){function logDebug(){0}return logDebug("sasCookieSync is created."),{protocol:(window.location.protocol||"").replace(":",""),cookies:{},qs:{},init:function(){this.cookies=this.parseCookies(document.cookie),this.qs=this.parseQueryString(window.location.search.substr(1))},parseQueryString:function(str){for(var a=str.split("&"),qs={},i=0;i<a.length;++i){var p=a[i].split("=");2==p.length&&(qs[p[0]]=decodeURIComponent(p[1].replace(/\+/g," ")))}return qs},getIntFromParsedQueryString:function(qs,value){value=parseInt(qs[value],10);return isNaN(value)||value<0?0:value},parseValues:function(params,splitter1,splitter2){for(var ret={},list=params.split(splitter1),i=0;i<list.length;i++){var cell=list[i],value=cell.indexOf(splitter2),name=cell.substring(0,value),value=cell.substring(value+1);ret[name]=decodeURIComponent(value)}return ret},parseCookies:function(cookies){return cookies?this.parseValues(cookies,"; ","="):{}},removeKnownPools:function(poolData,cookiez){if(logDebug("removeKnownPools"),this.doesCookieExists(cookiez,"csync"))for(var csync=cookiez.csync.split("|"),j=0;j<csync.length;j++){var cell=csync[j],poolId=cell.indexOf(":");0<poolId&&(delete poolData[poolId=cell.substring(0,poolId)],logDebug("pool removed "+poolId))}},removeRefreshedAndUnknownPools:function(poolData,cookiez){for(var p in logDebug("removeRefreshedAndUnknownPools"),poolsToRefresh=cookiez.rpools.split("|"),poolData)poolsToRefresh.includes(p)||(delete poolData[p],logDebug("pool removed "+p))},shouldRefreshCsync:function(cookiez){return this.doesCookieExists(cookiez,"rpools")},doesCookieExists:function(cookiez,cookie_name){return null!=cookiez&&!!cookiez[cookie_name]},getNwId:function(){return this.getIntFromParsedQueryString(this.qs,"nwid")},getDcId:function(){return this.getIntFromParsedQueryString(this.qs,"dcid")},getGdprApplies:function(){return this.getIntFromParsedQueryString(this.qs,"gdpr")},getGdprConsent:function(){return this.qs.gdprc||""},getRules:function(pools,consentString){var i,rules=[],consent=null;try{consent=consentString?new ConsentString(consentString):null}catch(e){}for(i in logDebug("consent",consent),pools)logDebug("partner gdprRule",pools[i].gdprRule),rules.push(null==consent?null==pools[i].gdprRule||0==pools[i].gdprRule:consent.isVendorAllowed(45)&&consent.isVendorAllowed(pools[i].vendorId));return rules},selectAllPools:function(poolData){var p,pools=[],dcId=this.getDcId();for(p in logDebug("dcid",dcId),poolData){var pool=poolData[p][dcId];pool&&pools.push(pool)}return pools.sort(function(a,b){return b.priority-a.priority})},createImg:function(src,tag_attributes){var i=new Image;return i.src=src,i.height=1,i.width=1,null!=tag_attributes&&this.populateTagAttributes(i,tag_attributes),logDebug("sasCookieSync in image"),i},createScript:function(src,tag_attributes){var s=document.createElement("SCRIPT");return s.src=src,s.type="text/javascript",s.async=!0,null!=tag_attributes&&this.populateTagAttributes(s,tag_attributes),null!=document.body&&(document.body.appendChild(s),logDebug("sasCookieSync in script")),s},createIFrm:function(src,tag_attributes){var ifrm=document.createElement("IFRAME");return ifrm.src=src,ifrm.scrolling="no",ifrm.frameBorder=0,ifrm.width=0,ifrm.height=0,ifrm.style.margin=0,ifrm.style.padding=0,ifrm.style.display="none",ifrm.style.width="0px",ifrm.style.height="0px",null!=tag_attributes&&this.populateTagAttributes(ifrm,tag_attributes),null!=document.body&&(document.body.appendChild(ifrm),logDebug("sasCookieSync in iframe")),ifrm},populateTagAttributes:function(elt,tags){for(var key in tags)tags.hasOwnProperty(key)&&(elt.dataset[tags[key].attributeName]=tags[key].attributeValue)},fireCSync:function(poolData){logDebug("Firing csync"),this.shouldRefreshCsync(this.cookies)?this.removeRefreshedAndUnknownPools(poolData,this.cookies):this.removeKnownPools(poolData,this.cookies);for(var gdpr={applies:this.getGdprApplies(),consent:this.getGdprConsent()},pools=this.selectAllPools(poolData),rules=this.getRules(pools,gdpr.consent),idx=0;idx<pools.length;idx++)if(!gdpr.applies||rules[idx]){var pool=pools[idx],src=pool[this.protocol];if(src){var tag_attributes=pool.tag_attributes,type=pool.type;switch(pool.isGdprSupported&&(src+=src.indexOf("?")<0?"?":"&",src+="gdpr="+(gdpr.applies?"1":"0")+"&gdpr_consent="+gdpr.consent),logDebug("src",src),logDebug("type",type),type){case 0:this.createImg(src,tag_attributes);break;case 1:this.createScript(src,tag_attributes);break;case 2:this.createIFrm(src,tag_attributes)}}else logDebug("no src found")}else logDebug("pool blocked by GDPR")}}}(window,document),sasCookieSync.init()},{"consent-string":5}]},{},[8]);